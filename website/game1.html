<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="styles.css"/>
        <script>
            var colours = ["red","blue","green","white","orange"];
            //
            function initFields(){
                for(i = 0; i < 40;i++){  
                    if(document.getElementById(i)){
                        document.getElementById(i).style.background = colours[(i+Math.round(Math.random()*10))%colours.length];
                    }
                }
            }
            //
            function validateResult(){
                var fisrstColor;
                var allCoulorsSame = true;
                for(i=0;i<40;i++){  
                    if(document.getElementById(i)){
                        if(!fisrstColor){
                            fisrstColor = document.getElementById(i).style.background;
                        }
                        if(document.getElementById(i).style.background != fisrstColor){
                            allCoulorsSame = false;
                        }
                    }
                }
                if(allCoulorsSame == true){
                    //document.getElementById("game").style.visibility = "hidden";
                    document.getElementById("result").style.visibility = "visible";
                } else {
                    document.getElementById("result").style.visibility = "hidden";
                }
                fisrstColor = "";
            }
            //
            function changeColour(e) {
                //get and set next colour - START
                //alert(document.getElementById(e.target.id).style.background);
                for(i=0; i<=colours.length ;i++){
                    if(colours[i] == document.getElementById(e.target.id).style.background){
                        if(i<colours.length-1){
                            document.getElementById(e.target.id).style.background = colours[i+1];
                            break;
                        } else{
                            document.getElementById(e.target.id).style.background = colours[0];
                            break;
                        }
                    }
                }
                //alert(document.getElementById(e.target.id).style.background);
                //get and set next colour - END

                // Validate result - START
                validateResult();
                // Validate result - END
            }
        </script>
    </head>
    <body onload="initFields()">
        <div id="game" align="center">
            <table id="playground" onmousedown="changeColour(event)"> 
                <tr>
                    <td id="11" ></td><td id="12"></td><td id="13"></td>
                </tr>
                <tr>
                    <td id="21"></td><td id="22"></td><td id="23"></td>
                </tr>
                <tr>
                    <td id="31"></td><td id="32"></td><td id="33"></td>
                </tr>
            </table>
        </div>
        <div style="visibility: hidden;" id="result" align="center">
            <img src="img/ajax_you_did_it.jpg">
            <p id="output"><a href="game1.html">PLAY AGAIN</a></p>
        </div>
    </body>
</html>